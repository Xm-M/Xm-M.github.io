<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="信仰空白的小明">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="信仰空白的小明">
<meta property="og:locale">
<meta property="article:author" content="小明">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>信仰空白的小明</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="تشغيل شريط التصفح">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">信仰空白的小明</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>الأرشيفات</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/07/202237-%E5%A0%86%EF%BC%8C%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%8C%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小明">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="信仰空白的小明">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/07/202237-%E5%A0%86%EF%BC%8C%E5%A0%86%E6%8E%92%E5%BA%8F%EF%BC%8C%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/" class="post-title-link" itemprop="url">堆，堆排序，优先队列</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2022-03-07 00:00:00 / عُدل: 18:10:33" itemprop="dateCreated datePublished" datetime="2022-03-07T00:00:00+08:00">2022-03-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>首先我们要知道优先队列是建立在堆的基础之上的，堆就是支持插入元素和寻找最大值（最小值），且开销较小的一种数据结构，为什么要写这篇博客呢，因为优先队列要在A*算法中用到（就是插入openlist和寻找最小F值).</p>
<h1 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h1><p>定义：一个二叉堆是一个几乎完全的二叉树，每个节点都满足：<strong>v(节点)<strong>和</strong>p(v)(v的父节点)</strong>,则<strong>p(v)<strong>的值不小于</strong>v</strong>的值。有<strong>n</strong>个节点的<strong>堆T</strong>可以由一个数组**H[1….n]**（H[n+1]的数组H[0]不保存数)表示：</p>
<p>​        <strong>1.T的根节点保存在H[1]中</strong></p>
<p>​        <strong>2.若T的节点X保存在H[j]中，则他的左节点保存在H[2j]中，他的右节点保存在H[2j+1]中</strong></p>
<p>​        <strong>3.元素H[j]的父节点若不是根节点，则保存在H[j&#x2F;2]中</strong></p>
<p>性质： 对于任何索引j，2&lt;&#x3D;j&lt;&#x3D;n,H[j&#x2F;2]&gt;&#x3D;H[j]</p>
<p><img src="C:\Users\i\Desktop\dui.png" alt="dui"></p>
<h1 id="堆上的运算"><a href="#堆上的运算" class="headerlink" title="堆上的运算"></a>堆上的运算</h1><h2 id="SIFI-UP"><a href="#SIFI-UP" class="headerlink" title="SIFI-UP"></a>SIFI-UP</h2><p>sift-up操作是把大于父节点的节点上移的过程。(这个函数是为了保证H[i]&gt;H[i&#x2F;2])</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SifiUp</span>(<span class="params"><span class="built_in">int</span> i</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">bool</span> done=<span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span>(i==<span class="number">1</span>)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(H[i]&gt;H[i/<span class="number">2</span>])&#123;</span><br><span class="line">            <span class="built_in">int</span> t=H[i];</span><br><span class="line">            H[i]=H[i/<span class="number">2</span>];</span><br><span class="line">            H[i/<span class="number">2</span>]=t;</span><br><span class="line">        &#125;<span class="keyword">else</span> done=<span class="literal">true</span>;</span><br><span class="line">        i=i/<span class="number">2</span>;</span><br><span class="line">    &#125;<span class="keyword">while</span>(i&gt;<span class="number">1</span>&amp;&amp;!done)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SIFI-DOWN"><a href="#SIFI-DOWN" class="headerlink" title="SIFI-DOWN"></a>SIFI-DOWN</h2><p>sifi-down操作就是把太小的数往下压的过程</p>
<p>其实sifi-down的整个过程和sifi-up差不了多少，难就难在H[i+1]&gt;H[i] i&#x3D;i+1上其实这句就是在判断是从右边往下down还是从左边往下down</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SifiDown</span>(<span class="params"><span class="built_in">int</span> i</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">bool</span> done=<span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span>(<span class="number">2</span>i&gt;n)<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">        i=i*<span class="number">2</span>;</span><br><span class="line">        <span class="comment">//这句可能不是很好理解</span></span><br><span class="line">        <span class="keyword">if</span>(i+<span class="number">1</span>&lt;=n&amp;&amp;H[i+<span class="number">1</span>]&gt;H[i])i=i+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(H[i/<span class="number">2</span>]&lt;H[i])&#123;</span><br><span class="line">            <span class="built_in">int</span> t=H[i];</span><br><span class="line">            H[i]=H[i/<span class="number">2</span>];</span><br><span class="line">            H[i/<span class="number">2</span>]=t;</span><br><span class="line">        &#125;<span class="keyword">else</span> done=<span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">while</span>(<span class="number">2</span>i&lt;=n&amp;&amp;!done)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><p>插入过程就是把数放入最后一位，再将他SIFI-UP的过程</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span>(<span class="params"><span class="built_in">float</span> val</span>)</span>&#123;</span><br><span class="line">	H.Add(val);</span><br><span class="line">	SifiUp(H.Count<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>删除过程先把要删除的数和最后一位进行交换，再从当前位置进行Sifi-Down操作即可</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">float</span> <span class="title">Delete</span>(<span class="params"><span class="built_in">int</span> i</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">int</span> t=H[i];H[i]=H[n];H[n]=t;</span><br><span class="line">    <span class="built_in">float</span> ans=H.Remove(H[n]);</span><br><span class="line">    SifiDown(i);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除最大值"><a href="#删除最大值" class="headerlink" title="删除最大值"></a>删除最大值</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">float</span> <span class="title">DeleteMax</span>()</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> Delete(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实A*里要用到的方法就上面这些，下面的算是拓展内容吧。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/05/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小明">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="信仰空白的小明">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/05/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>

              <time title="أُنشأ: 2022-03-05 20:55:45" itemprop="dateCreated datePublished" datetime="2022-03-05T20:55:45+08:00">2022-03-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/05/202235-%E6%A8%A1%E7%B3%8A%E9%80%BB%E8%BE%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="小明">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="信仰空白的小明">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/05/202235-%E6%A8%A1%E7%B3%8A%E9%80%BB%E8%BE%91/" class="post-title-link" itemprop="url">模糊逻辑</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>

              <time title="أُنشأ: 2022-03-05 00:00:00" itemprop="dateCreated datePublished" datetime="2022-03-05T00:00:00+08:00">2022-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">عُدل في</span>
                <time title="عُدل: 2022-03-07 00:33:42" itemprop="dateModified" datetime="2022-03-07T00:33:42+08:00">2022-03-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="模糊集合"><a href="#模糊集合" class="headerlink" title="模糊集合"></a>模糊集合</h1><p>​        对于一个值是否属于某个普通集合，只有“属于”和“不属于”两种情况，例如一个人是否是男人，一个数是不是整数。这些普通集合都有着明确的边界定义。但是，很多时候你很难用一个固定的标准去衡量某个元素是否属于某个集合。比如食堂的菜是否好吃，你可能觉得它有点好吃，但称不上美味；或者并不好吃但不至于难吃。这种时候，对于味道的各种集合（“好吃”，“一般”，“难吃”），一道菜（元素）属于哪个集合就不能用简单的是或者不是来定夺。此时就能用到模糊集合来定义这些元素。</p>
<h2 id="隶属度函数"><a href="#隶属度函数" class="headerlink" title="隶属度函数"></a>隶属度函数</h2><p>以智商为例子<img src="/202235-%E6%A8%A1%E7%B3%8A%E9%80%BB%E8%BE%91.assets/zhishang.png" alt="zhishang"></p>
<p>（紫色y轴代表隶属度，黑色x轴为IQ值，蓝色为“笨拙”集合的隶属度函数，绿色为“平均”集合的隶属度函数，红色为“聪明”的隶属度函数）</p>
<p>​        假设某人的智商为115，那么他的智商属于哪个水平呢？肯定不笨，比普通人要高，但说不上很聪明。把这个评价转化为该智商对应各个模糊集合的隶属度就是：<strong>Fstupid（115）&#x3D;0;Fnormal（115)&#x3D;0.25;Fclever(115)&#x3D;0.75</strong>这样一个人的智商水平就能粗略的用数字表示出来了。</p>
<p>​        每个模糊集合都有一个属于他自己的隶属度函数，用于描述某个值“属于”该集合的程度，隶属度函数有许多类型，如三角形，梯形，S-曲线型 等等，就不一一列举了。</p>
<h2 id="模糊集合的运算"><a href="#模糊集合的运算" class="headerlink" title="模糊集合的运算"></a>模糊集合的运算</h2><p>集合“普通与聪明”表示为：<strong>Fnormal&amp;clever(X)&#x3D;min{Fnormal(X),Fclever(X)}</strong></p>
<p>集合“普通或聪明”表示为：<strong>Fnormal|clever(X)&#x3D;max{Fnormal(X),Fclever(X)}</strong></p>
<p>集合“不聪明”表示为：<strong>Fclever(X)&#96;&#x3D;1-Fclever(X)</strong></p>
<h3 id="限制词"><a href="#限制词" class="headerlink" title="限制词"></a>限制词</h3><p>​        限制词是一元运算符，可以用来修饰模糊集合的含义。常用的有”非常的“（例如非常聪明：<em><strong>Fverycleaver(X)&#x3D;(Fclever(X))^2)<em><strong>和“相当的”(例如相当聪明：</strong></em>Ffairlyclever(X)&#x3D;Fclever(X)^1&#x2F;2)</strong></em></p>
<h1 id="模糊语言变量"><a href="#模糊语言变量" class="headerlink" title="模糊语言变量"></a>模糊语言变量</h1><p>​        一个模糊语言变量（FLV）是多个模糊集合的组合，比如一个人的IQ可以描述为“笨蛋”，“普通”和“聪明”，那么集合符号可以写成<strong>IQ&#x3D;{笨蛋，普通，聪明}</strong> 同理还有**味道&#x3D;{难吃，一般，美味}<strong>，</strong>速度&#x3D;{慢，中，快}**等等</p>
<h1 id="模糊规则"><a href="#模糊规则" class="headerlink" title="模糊规则"></a>模糊规则</h1><p>​        模糊规则是由一种前因与后果的形式构成：<strong>如果 <em>前提</em> 那么 <em>后果</em></strong></p>
<p>​        前提代表一个条件，如果这个条件被满足了，则达成某种后果，这种格式最常见的就是if-else</p>
<p>​        <code>if(player.hp&lt;=0)player.Death();</code></p>
<p>​        模糊规则与传统规则不同，因为一个前提是否满足，不再只有“是”，“否”两种答案，而是根据隶属度对该前提有不同程度的“满足”比如：</p>
<p>​        <code>if(玩家残血)玩家逃跑;</code></p>
<p>​        对于玩家残血这一条件，不同的hp值对应不同的隶属度，那么对于逃跑反应的剧烈程度也就不同。</p>
<p>​        前提可能是单个模糊集合，也可能是多个模糊集合的组合，一个模糊推理系统由许许多多的模糊规则组成。每次模糊推理启动，会遍历整个模糊规则集合，计算所有后果，并对后果进行去模糊化，最后得到一个普通的值。（这里貌似很不好理解，先举个简单的小例子：假设食堂由<strong>口味</strong>这个模糊语言变量来作为评判标准，且有如下规则：<strong>口味好-&gt;期望值高，口味差-&gt;期望值低</strong> 那么对于一个食堂(口味x)，计算口味好的隶属度得到期望值高的隶属度，再计算口味差的隶属度得到期望值低的隶属度，再将期望值高低通过去模糊化将期望值用一个数表示出来，从而比较各个食堂的好坏。算了，反正往下看</p>
<h1 id="模糊推理"><a href="#模糊推理" class="headerlink" title="模糊推理"></a>模糊推理</h1><p>​        那么来到了重中之重的模糊推理时间，模糊推理就是用一些值来展示系统的地方，按如下步骤进行模糊推理：</p>
<p>​        <strong>1.对于每条规则</strong></p>
<p>​            <strong>1a.计算每一个前置条件的隶属度</strong></p>
<p>​            <strong>1b.基于1a中确定的值，计算规则的推理结论（后果）</strong></p>
<p>​        <strong>2.将所有推理结论合成一个单一的结论（一个模糊集合）</strong></p>
<p>​        <strong>3.对从2得到的结论进行去模糊化，得到普通的值</strong></p>
<p>​        这几条规则讲的很笼统啊，反正就是把每个前置条件的隶属度算出来，就能得到后果的置信度，一条后果对应一个模糊集合的置信度，每个规则都算完以后，就能对后果变量进行去模糊化处理</p>
<h2 id="去模糊化的方法"><a href="#去模糊化的方法" class="headerlink" title="去模糊化的方法"></a>去模糊化的方法</h2><p>​        去模糊化是模糊化的逆过程，是把一个模糊集合转换成一个普通值的过程，下面介绍几种常见的方法：</p>
<h3 id="最大平均值（MOM"><a href="#最大平均值（MOM" class="headerlink" title="最大平均值（MOM)"></a>最大平均值（MOM)</h3><p>只考虑隶属度最高的模糊集合，再计算其均值。他可能把产生的普通值推向域的一端，导致结果的不准确。</p>
<h3 id="中心法"><a href="#中心法" class="headerlink" title="中心法"></a>中心法</h3><p>很难</p>
<h3 id="最大平均值"><a href="#最大平均值" class="headerlink" title="最大平均值"></a>最大平均值</h3><p><strong>Crisp Value&#x3D;Σrepresentative value*confidence&#x2F;Σconfidence</strong></p>
<p>​        反正前两种我也没用到，就不写了，总之就是计算各个模糊集合的<em>标准值（比如三角形的顶点，梯形的平台值的中点）✖该模糊集合的隶属度</em> 再除以他们的隶属度和</p>
<p>​        无论用哪种方法，最后得到的普通值就是最后的评判标准，可以根据最后的值来做出相对正确的决定    </p>
<h1 id="模糊逻辑模块的编码"><a href="#模糊逻辑模块的编码" class="headerlink" title="模糊逻辑模块的编码"></a>模糊逻辑模块的编码</h1><p>然后就是我最喜欢的写码环节了，怎么说呢，理论的东西背的再多，应用不了都是df，所以码才是最关键的</p>
<h2 id="模糊模块类"><a href="#模糊模块类" class="headerlink" title="模糊模块类"></a>模糊模块类</h2><p>FuzzyModule类 是模糊系统的核心，每个AI都有一个FuzzyModule。每个FuzzyModule都有一个模糊语言变量的list 表示对象拥有的所有模糊语言变量（力量&#x3D;{低，中，高}，价格&#x3D;{低，中，高}等等）那个varmap就是用名字来访问list内容的。还拥有一个FuzzyRule的list用于保存所有模糊规则 有了这两个东西就满足了进行模糊推理的基本条件</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FuzzyModule</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//每个ai都拥有一个fzm实例</span></span><br><span class="line"><span class="comment">//通过名字访问模糊变量</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> moduleName;</span><br><span class="line"><span class="comment">//模糊语言变量的list</span></span><br><span class="line"><span class="keyword">public</span> List&lt;FuzzyVariable&gt; VariableList;</span><br><span class="line"><span class="comment">//一个描述对应一个模糊语言变量 比如“距离”=&#123;近，中，远&#125;；“期望”=&#123;低，中，高&#125;；`</span></span><br><span class="line"><span class="keyword">public</span> Dictionary&lt;<span class="built_in">string</span>, FuzzyVariable&gt; varMap;`</span><br><span class="line"><span class="comment">//包含了该模块下的所有模糊规则`</span></span><br><span class="line"><span class="keyword">public</span> List&lt;FuzzyRule&gt; fuzzyRules;`</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    varMap = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, FuzzyVariable&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; VariableList.Count; i++)`</span><br><span class="line">    &#123;</span><br><span class="line">        varMap.Add(VariableList[i].name, VariableList[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">AddRule</span>(<span class="params">IFuzzyTerm qianti,IFuzzyTerm jieguo</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//FuzzyRule fuzzyRule = new FuzzyRule(qianti, jieguo);</span></span><br><span class="line">    <span class="comment">//fuzzyRules.Add(fuzzyRule);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ClearAllConsequents</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; fuzzyRules.Count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        fuzzyRules[i].ClearConsequence();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用指定模糊语言变量的模糊化方法,这个是模糊推理的第一步</span></span><br><span class="line"><span class="comment">//例：Fuzzify(&quot;距离&quot;,5);然后</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fuzzify</span>(<span class="params"><span class="built_in">string</span> flvName,<span class="built_in">float</span> val</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!varMap.ContainsKey(flvName)) Debug.LogError(<span class="string">&quot;没有这个模糊变量&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> varMap[flvName].Fuzzify(val);<span class="comment">//计算隶属度 然后把他们放在各自的dom中</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//给定模糊变量 用去模糊方法来去模糊化</span></span><br><span class="line"><span class="comment">//去模糊化应该是最后一步了，一般是最后算值的时候用的了</span></span><br><span class="line"><span class="comment">//这个输入的string其实就是后果模糊变量的名字，当然要去模糊化的本来就是他</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">float</span> <span class="title">Defuzzy</span>(<span class="params"><span class="built_in">string</span> key</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!varMap.ContainsKey(key)) Debug.LogError(<span class="string">&quot;没有这个模糊变量2&quot;</span>);</span><br><span class="line">    <span class="comment">//清除所有后果的隶属度</span></span><br><span class="line">    ClearAllConsequents();</span><br><span class="line">    <span class="comment">//这是模糊推理的第二步</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; fuzzyRules.Count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        fuzzyRules[i].Calculate();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这是模糊推理的第三步</span></span><br><span class="line">    <span class="built_in">float</span> defuzzy = varMap[key].Defuzzy();</span><br><span class="line">    <span class="comment">//Debug.Log(&quot;最后得到的期望值为：&quot; + defuzzy);</span></span><br><span class="line">    <span class="keyword">return</span> defuzzy;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        那么我是怎么用的呢，我的模糊逻辑运用在AI买棋子和升级上，所以拥有的模糊变量应该是（各种棋子的）攻击力&#x3D;{低，中，高}，价格&#x3D;{便宜，中等，贵}，防御力&#x3D;{低，中，高}等等</p>
<h2 id="模糊集合类"><a href="#模糊集合类" class="headerlink" title="模糊集合类"></a>模糊集合类</h2><p>FuzzySet模糊集合类，就是保存每个模糊集合的信息，我们知道一个模糊集合拥有一个隶属度函数，以及一个论域（范围），一个用于计算隶属度的函数，可以把隶属度保存在对象内.</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//我写的这个类包含了左肩 三角 右肩类型，如果要特殊类型的可以把FuzzySet设置为抽象类，然后在子类中</span></span><br><span class="line"><span class="comment">//完成对隶属度函数的描述</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FuzztSet</span>:<span class="title">ScriptableObject</span>,<span class="title">IFuzzyTerm</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> fuzzySetName;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> m_Dom;<span class="comment">//当前隶属度</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> m_Max;<span class="comment">//隶属度最大值 也就是所谓的代表值</span></span><br><span class="line">    <span class="keyword">public</span> Vector3 setRange;</span><br><span class="line">    <span class="keyword">public</span> Vector3 domRange;</span><br><span class="line">    <span class="comment">//计算隶属度</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetRange</span>(<span class="params">Vector3 setRange,Vector3 domRange</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.setRange = setRange;</span><br><span class="line">        <span class="keyword">this</span>.domRange = domRange;</span><br><span class="line">        m_Max = domRange.y;<span class="comment">//一般最大值就是中值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//计算隶属度并将他保存在m_Dom中</span></span><br><span class="line">    <span class="comment">//这个CalculateDom其实就是隶属度函数，把传入的值计算隶属度（模糊化）</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">float</span> <span class="title">CalculateDom</span>(<span class="params"><span class="built_in">float</span> val</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (val &gt; setRange.y &amp;&amp; val &lt; setRange.z)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">float</span> k = (domRange.y - domRange.z) / (setRange.y - setRange.z);</span><br><span class="line">            m_Dom = k * (val - setRange.y) + domRange.y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (val &lt;= setRange.y &amp;&amp; val &gt; setRange.x)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">float</span> k = (domRange.y - domRange.x) / (setRange.y - setRange.x);</span><br><span class="line">            m_Dom = k * (val - setRange.y) + domRange.y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> m_Dom = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//Debug.Log(fuzzySetName+&quot;:&quot;+ m_Dom);</span></span><br><span class="line">        <span class="keyword">return</span> m_Dom;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//合成结论</span></span><br><span class="line">    <span class="comment">//若该集合为结果集合 并且符合一条规则 将其隶属度设置为置信度</span></span><br><span class="line">    <span class="comment">//这里是要修剪的但是我还没写</span></span><br><span class="line">    <span class="comment">//置信度都是往大了写</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OrWithDom</span>(<span class="params"><span class="built_in">float</span> val</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Debug.LogError(&quot;老子这里还没写！&quot;);</span></span><br><span class="line">        <span class="keyword">if</span> (m_Dom &lt; val) m_Dom = val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这个值是去模糊化用的，象征值懂吧，就是那个三角形的顶点，梯形的平台</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">float</span> <span class="title">GetRepresentVal</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (domRange.x == domRange.y) <span class="keyword">return</span> (setRange.x + setRange.y) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (domRange.z == domRange.y) <span class="keyword">return</span> (setRange.z + setRange.y) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">return</span> setRange.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">float</span> <span class="title">GetDom</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> m_Dom;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ClearDom</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_Dom = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="模糊语言变量-1"><a href="#模糊语言变量-1" class="headerlink" title="模糊语言变量"></a>模糊语言变量</h2><p>FuzzyVariable模糊语言变量 嘛一个模糊语言变量有多个模糊集合对吧，比如**IQ&#x3D;{笨蛋，普通，聪明}**表示IQ这个模糊语言变量，包含了笨蛋，普通，聪明三个模糊集合。然后还有一个论域。然后有一个去模糊化的函数，当然这个去模糊化的函数只用在”结果“变量上（比如结果是期望，那么就会得出一个具体的期望值）</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FuzzyVariable</span> : <span class="title">ScriptableObject</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> variableName;</span><br><span class="line">    <span class="keyword">public</span> List&lt;FuzztSet&gt; memberSets;</span><br><span class="line">    <span class="built_in">float</span> m_MinRange;</span><br><span class="line">    <span class="built_in">float</span> m_MaxRange;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fuzzify</span>(<span class="params"><span class="built_in">float</span> val</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//分别计算所有模糊集合的隶属度 并将它们保存在各自的m_Dom中</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; memberSets.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            memberSets[i].CalculateDom(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//平均值法去模糊化处理</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">float</span> <span class="title">Defuzzy</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> confidenceSum = <span class="number">0</span>; ;</span><br><span class="line">        <span class="built_in">float</span> valSum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; memberSets.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            confidenceSum += memberSets[i].GetDom();</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;confidence:&quot; + confidenceSum);</span></span><br><span class="line">            valSum += memberSets[i].GetDom() * memberSets[i].GetRepresentVal();</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;valsum:&quot; + valSum);</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Debug.Log(&quot;ans:&quot; + valSum / confidenceSum);</span></span><br><span class="line">        <span class="keyword">return</span> valSum / confidenceSum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="模糊规则类"><a href="#模糊规则类" class="headerlink" title="模糊规则类"></a>模糊规则类</h2><p>FuzzyRule模糊规则类，我们知道模糊规则有一个“前提”和一个“后果”，他们都是模糊集合，或则模糊集合的组合。如果只有一个模糊集合当前提或者后果的话，FuzzyRule只要有两个FuzzySet类就可以了，但是模糊规则的前提一般是多个模糊集合的组合。比如 <em>如果 <strong>攻击力高</strong>与<strong>价格低</strong>那么<strong>期望值高</strong></em>  对于这条规则前提是由攻击力高集合与价格低集合合成的。还有些前提可能需要“非常”，“比较”等修饰词。那么怎么把两个集合组合起来呢，怎么用修饰词给修饰集合呢？这就要用到设计模式里的组合模式了，以后我会具体写一篇，现在就不多说了，这里用到的是FuzzyTerm模糊项接口</p>
<h3 id="FuzzyTerm"><a href="#FuzzyTerm" class="headerlink" title="FuzzyTerm"></a>FuzzyTerm</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public interface IFuzzyTerm</span><br><span class="line">&#123;</span><br><span class="line">    //返回该组合的隶属度</span><br><span class="line">    float GetDom();</span><br><span class="line">    //这个是用来更新后果的隶属度的一个方法</span><br><span class="line">    void OrWithDom(float val);</span><br><span class="line">    void ClearDom();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以FuzzyAnd为例：</p>
<h2 id="FuzzyAnd"><a href="#FuzzyAnd" class="headerlink" title="FuzzyAnd"></a>FuzzyAnd</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FuzzyAnd</span> : <span class="title">IFuzzyTerm</span></span><br><span class="line">&#123;</span><br><span class="line">    List&lt;IFuzzyTerm&gt; terms;</span><br><span class="line">    FuzzyAnd(IFuzzyTerm[] term)</span><br><span class="line">    &#123;</span><br><span class="line">        terms = <span class="keyword">new</span> List&lt;IFuzzyTerm&gt;();</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">var</span> t <span class="keyword">in</span> term)</span><br><span class="line">        &#123;</span><br><span class="line">            terms.Add(t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回terms中隶属度的最小值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">float</span> <span class="title">GetDom</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> minDom = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">var</span> t <span class="keyword">in</span> terms)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(t.GetDom() &lt; minDom)minDom = t.GetDom();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> minDom;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OrWithDom</span>(<span class="params"><span class="built_in">float</span> val</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">var</span> t <span class="keyword">in</span> terms)t.OrWithDom(val); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ClearDom</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">var</span> term <span class="keyword">in</span> terms)term.ClearDom();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样声明FuzzyAnd对象是就可以输入多个FuzzyTerm对象，FuzzyAnd就能处理多个对象了</p>
<p>那么对于模糊规则，把 <em>前提</em>  和 <em>后果</em> 设置为FuzzyTerm类就可以完成模糊集合的组合了</p>
<h2 id="FuzzyRule"><a href="#FuzzyRule" class="headerlink" title="FuzzyRule"></a>FuzzyRule</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FuzzyRuleSet</span> : <span class="title">ScriptableObject</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> IFuzzyTerm m_pAcendence;</span><br><span class="line">    <span class="keyword">public</span> IFuzzyTerm m_pConsedence;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetConfidenceOfConsequentToZero</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_pConsedence.ClearDom();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//该方法计算了前置条件的隶属度，同时计算量后果条件的隶属度</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Calculate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        m_pConsedence.OrWithDom(m_pAcendence.GetDom());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么整个模糊推理的过程就是 给定一组值，计算对于该值（如speed&#x3D;1）对应的模糊语言变量（速度）中的每个模糊集合（慢，中，快）的隶属度，放在代码里就是调用FuzzyModule中的Fuzzify即</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fuzzify(&quot;速度&quot;,1);</span><br></pre></td></tr></table></figure>

<p>同理把其他的所有需要的模糊语言变量都计算一遍：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Fuzzify(&quot;攻击&quot;,10);</span><br><span class="line">Fuzzify(&quot;价格&quot;,50);</span><br><span class="line">Fuzzify(&quot;防御力&quot;,20);</span><br><span class="line">//......</span><br></pre></td></tr></table></figure>

<p>计算完所有前置条件的隶属度后，就能利用模糊规则进行推理了，具体推理过程其实就是调用每个模糊规则的Caculate函数，这样可以得到后果语言变量的各个集合的置信度</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; fuzzyRules.Count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        fuzzyRules[i].Calculate();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>最后再对后果模糊变量进行去模糊化处理，就能得到想要的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">varMap[&quot;期望&quot;].Defuzzy();</span><br></pre></td></tr></table></figure>

<p>这两部的过程都被封装在FuzzyModule的Defuzzy函数中，所以实际上调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float desire= Defuzzy(&quot;期望&quot;);</span><br></pre></td></tr></table></figure>

<p>即可。</p>
<h2 id="库博方法"><a href="#库博方法" class="headerlink" title="库博方法"></a>库博方法</h2><p>​        随着前提的模糊语言变量的组合数变多，那么需要的规则数就会多的哈人，但是用库博方法的话，就能把一条条多的哈人的方法变成几条简单的规则的组合。库博规则的工作方法是：</p>
<p>​        <em>如果<strong>攻击力高</strong>与<strong>价格便宜</strong>，那么<strong>期望值高</strong></em> </p>
<p>在逻辑上等价于：</p>
<p>​        <em>如果<strong>攻击力高</strong>那么*<em>期望高</em></em> 或 如果<strong>价格便宜</strong> 那么期望高*</p>
<p>利用该原理，就能把复杂的模糊规则拆分为一条条简单的规则 再用or将其连接即可（或就是取min）例如：</p>
<p>​        <em>如果<strong>攻击力高</strong>与<strong>价格便宜</strong>，那么<strong>期望值高</strong></em> </p>
<p>​        <em>如果<strong>攻击力高</strong>与<strong>价格中等</strong>，那么<strong>期望值中等</strong></em> </p>
<p>​        <em>如果<strong>攻击力高</strong>与<strong>价格高</strong>，那么<strong>期望值中等</strong></em> </p>
<p>​        <em>如果<strong>攻击力中等</strong>与<strong>价格便宜</strong>，那么<strong>期望值高</strong></em> </p>
<p>​        <em>如果<strong>攻击力中等</strong>与<strong>价格中等</strong>，那么<strong>期望值中等</strong></em> </p>
<p>​        <em>如果<strong>攻击力中等</strong>与<strong>价格高</strong>，那么<strong>期望值低</strong></em></p>
<p>​        <em>如果<strong>攻击力低</strong>与<strong>价格便宜</strong>，那么<strong>期望值中等</strong></em> </p>
<p>​        <em>如果<strong>攻击力低</strong>与<strong>价格中等</strong>，那么<strong>期望值低</strong></em> </p>
<p>​        <em>如果<strong>攻击力低</strong>与<strong>价格高</strong>，那么<strong>期望值低</strong></em></p>
<p>简化为：</p>
<p>​        <em>如果<strong>攻击力高</strong></em>，那么<strong>期望值高</strong></p>
<p>​        <em>如果<strong>攻击力中</strong></em>，那么<strong>期望值中</strong></p>
<p>​        <em>如果<strong>攻击力低</strong></em>，那么<strong>期望值低</strong></p>
<p>​        <em>如果<strong>价格高</strong></em>，那么<strong>期望值低</strong></p>
<p>​        <em>如果<strong>价格中等</strong></em>，那么<strong>期望值中</strong></p>
<p>​        <em>如果<strong>价格便宜</strong></em>，那么<strong>期望值高</strong></p>
<p>虽然看起来没简单多少，但是如果前置变量的集合数再多一点，你就会发现库博方法能帮你解决许多问题</p>
<p>库博方法的实现并不需要改变或者添加代码，只要把规则库简化一下即可。</p>
<p>模糊逻辑到此结束，还有一些例子啊，图啊什么的之后慢慢加就好了，完结撒花</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          المحتويات
        </li>
        <li class="sidebar-nav-overview">
          عام
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">小明</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">المقالات</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">الوسوم</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小明</span>
</div>
  <div class="powered-by">تطبيق الموقع <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
